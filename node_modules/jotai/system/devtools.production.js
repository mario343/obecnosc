System.register(["react","jotai"],function(J){"use strict";var y,m,M,R,g,U,N;return{setters:[function(E){y=E.useRef,m=E.useEffect,M=E.useContext,R=E.useState,g=E.useCallback},function(E){U=E.useAtom,N=E.SECRET_INTERNAL_getScopeContext}],execute:function(){J({useAtomDevtools:E,useAtomsDevtools:W,useAtomsSnapshot:X,useGotoAtomsSnapshot:H});function E(e,n,t){(typeof n=="string"||typeof t<"u")&&(console.warn("DEPRECATED [useAtomDevtools] use DevtoolOptions"),n={name:n,scope:t});const{enabled:s,name:u,scope:r}=n||{};let c;try{c=(s!=null?s:!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}const[a,f]=U(e,r),D=y(a),w=y(!1),l=y(),A=u||e.debugLabel||e.toString();m(()=>{if(!c)return;const d=o=>{if(typeof f=="function"){f(o);return}console.warn(`[Warn] you cannot do write operations (Time-travelling, etc) in read-only atoms
`,e)};l.current=c.connect({name:A});const O=l.current.subscribe(o=>{var i,S,p,v,C,b;if(o.type==="ACTION"&&o.payload)try{d(JSON.parse(o.payload))}catch(_){console.error(`please dispatch a serializable value that JSON.parse() support
`,_)}else o.type==="DISPATCH"&&o.state?(((i=o.payload)==null?void 0:i.type)==="JUMP_TO_ACTION"||((S=o.payload)==null?void 0:S.type)==="JUMP_TO_STATE")&&(w.current=!0,d(JSON.parse(o.state))):o.type==="DISPATCH"&&((p=o.payload)==null?void 0:p.type)==="COMMIT"?(v=l.current)==null||v.init(D.current):o.type==="DISPATCH"&&((C=o.payload)==null?void 0:C.type)==="IMPORT_STATE"&&(((b=o.payload.nextLiftedState)==null?void 0:b.computedStates)||[]).forEach(({state:_},T)=>{var h;T===0?(h=l.current)==null||h.init(_):d(_)})});return l.current.shouldInit=!0,O},[e,c,A,f]),m(()=>{!l.current||(D.current=a,l.current.shouldInit?(l.current.init(a),l.current.shouldInit=!1):w.current?w.current=!1:l.current.send(`${A} - ${new Date().toLocaleString()}`,a))},[e,c,A,a])}const P="h",I="n",V="l",x="a",k="m",$=(e,n)=>{const t=n.map(s=>{var u,r;const c=(r=(u=e[x])==null?void 0:u.call(e,s))!=null?r:{};return[s,"v"in c?c.v:void 0]});return new Map(t)};function X(e){const n=N(e),t=M(n).s;if(!t[I])throw new Error("useAtomsSnapshot can only be used in dev mode.");const[s,u]=R(()=>new Map);return m(()=>{var r;const c=()=>{var f;const D=Array.from(((f=t[V])==null?void 0:f.call(t))||[]);u($(t,D))},a=(r=t[I])==null?void 0:r.call(t,c);return c(),a},[t]),s}function H(e){const n=N(e),t=M(n).s;if(!t[I])throw new Error("useGotoAtomsSnapshot can only be used in dev mode.");return g(s=>{t[P](s)},[t])}const j=(e,n)=>e.size===n.size&&Array.from(e).every(([t,s])=>Object.is(n.get(t),s)),B=(e,n)=>e.size===n.size&&Array.from(e).every(([t,s])=>{const u=n.get(t);return u&&s.size===u.size&&Array.from(s).every(r=>u.has(r))}),L=e=>e.debugLabel?`${e}:${e.debugLabel}`:`${e}`,z=e=>{const n={};e.values.forEach((s,u)=>{n[L(u)]=s});const t={};return e.dependents.forEach((s,u)=>{t[L(u)]=Array.from(s).map(L)}),{values:n,dependents:t}};function W(e,n){typeof n<"u"&&typeof n!="object"&&(console.warn("DEPRECATED [useAtomsDevtools] use DevtoolsOptions"),n={scope:n});const{enabled:t,scope:s}=n||{},u=N(s),{s:r,w:c}=M(u);let a;try{a=(t!=null?t:!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(a&&!r[I])throw new Error("useAtomsDevtools can only be used in dev mode.");const[f,D]=R(()=>({values:new Map,dependents:new Map}));m(()=>{var o;if(!a)return;const i=()=>{var p,v,C;const b=new Map,_=new Map;for(const T of((p=r[V])==null?void 0:p.call(r))||[]){const h=(v=r[x])==null?void 0:v.call(r,T);if(h){if(h.r===h.i)return;"v"in h&&b.set(T,h.v)}const G=(C=r[k])==null?void 0:C.call(r,T);G&&_.set(T,G.t)}D(T=>j(T.values,b)&&B(T.dependents,_)?T:{values:b,dependents:_})},S=(o=r[I])==null?void 0:o.call(r,i);return i(),S},[a,r]);const w=g(o=>{const{values:i}=o;c?c(S=>{r[P](i,S)}):r[P](i)},[r,c]),l=y(!1),A=y(!0),d=y(),O=y([]);m(()=>{if(!a)return;const o=(p=O.current.length-1)=>{const v=O.current[p>=0?p:0];if(!v)throw new Error("snaphost index out of bounds");return v},i=a.connect({name:e}),S=i.subscribe(p=>{var v;switch(p.type){case"DISPATCH":switch((v=p.payload)==null?void 0:v.type){case"RESET":break;case"COMMIT":i.init(z(o())),O.current=[];break;case"JUMP_TO_ACTION":case"JUMP_TO_STATE":l.current=!0,w(o(p.payload.actionId-1));break;case"PAUSE_RECORDING":A.current=!A.current;break}}});return d.current=i,d.current.shouldInit=!0,S},[a,w,e]),m(()=>{if(d.current){if(d.current.shouldInit){d.current.init(void 0),d.current.shouldInit=!1;return}l.current?l.current=!1:A.current&&(O.current.push(f),d.current.send({type:`${O.current.length}`,updatedAt:new Date().toLocaleString()},z(f)))}},[f])}}}});
